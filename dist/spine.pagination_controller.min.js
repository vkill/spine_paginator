// spine.paginator.js
// version: 0.1.0
// author: vkill
// license: MIT
(function(){var t,s=function(t,s){return function(){return t.apply(s,arguments)}},e={}.hasOwnProperty,i=function(t,s){function i(){this.constructor=t}for(var r in s)e.call(s,r)&&(t[r]=s[r]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t};t=this.Spine||require("spine"),t.PaginationController=function(t){function e(){if(this.templateHtmlDataEmpty=s(this.templateHtmlDataEmpty,this),this.render=s(this.render,this),e.__super__.constructor.apply(this,arguments),null==this.constructor.MODEL)throw Error("please defined class variable MODEL");if(this.constructor.PER_PAGE=this.constructor.PER_PAGES[0],null==this.constructor.PER_PAGE)throw Error("please defined class variable PER_PAGES");this.constructor.MODEL.bind(this.constructor.PAGINATE_EVENT,this.render)}return i(e,t),e.MODEL=null,e.PER_PAGES=[10,20,30,40],e.PAGINATE_EVENT="paginate",e.PAGE=1,e.PER_PAGE=null,e.PAGINATION=null,e.refresh=function(){return this.PAGE=1,this.load()},e.toPage=function(t){return this.PAGE=t,this.load()},e.load=function(){var t;return t=this.MODEL.page(this.PAGE,{perPage:this.PER_PAGE}),this.PAGINATION=t,this.MODEL.trigger(this.PAGINATE_EVENT)},e.prototype.render=function(){var t;return t=this.constructor.PAGINATION,t.records.length>0?this.html(this.templateHtml()):this.html(this.templateHtmlDataEmpty())},e.prototype.events={"click a[data-page]":"clickPage"},e.prototype.clickPage=function(t){var s;return t.preventDefault(),s=this.getPageFromE(t),null!=s?this.constructor.toPage(s):void 0},e.prototype.getPageFromE=function(t){var s,e,i;if(s=$(t.target),s.parent(".disabled, .active").length>0)return null;switch(i=s.data("page"),e=null,i){case"first":e=this.constructor.PAGINATION.firstPage();break;case"prev":e=this.constructor.PAGINATION.currentPage()-1;break;case"next":e=this.constructor.PAGINATION.currentPage()+1;break;case"last":e=this.constructor.PAGINATION.lastPage();break;case"gap":e=null;break;default:e=i}return e},e.prototype.templateHtmlDataEmpty=function(){return""},e.prototype.templateHtml=function(){var t,s;return t=this.constructor.PAGINATION,s='<div class="pagination pagination-small pull-right">\n  <ul>\n    <li {{#unless hasFirst}}class="disabled"{{/unless}}>\n      <a href="javascript:void(0);" data-page="first">first</a>\n    </li>\n    <li {{#unless hasPrev}}class="disabled"{{/unless}}>\n      <a href="javascript:void(0);" data-page="prev">prev</a>\n    </li>\n    {{#each pages}}\n      {{#if this.gap}}\n        <li class="disabled">\n          <a href="javascript:void(0);" data-page=\'gap\'>...</a>\n        </li>\n      {{else}}\n        <li {{#if this.current}}class="active"{{/if}}>\n          <a href="javascript:void(0);" data-page={{this.number}}>{{this.number}}</a>\n        </li>\n      {{/if}}\n    {{/each}}\n    <li {{#unless hasNext}}class="disabled"{{/unless}}>\n      <a href=\'javascript:void(0);\' data-page="next">next</a>\n    </li>\n    <li {{#unless hasLast}}class="disabled"{{/unless}}>\n      <a href=\'javascript:void(0);\' data-page="last">last</a>\n    </li>\n  </ul>\n</div>',Handlebars.compile(s)(t.locals)},e}(t.Controller)}).call(this);